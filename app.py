import streamlit as st
import pandas as pd
import plotly.express as px

# ุฅุนุฏุงุฏ ุงูุตูุญุฉ
st.set_page_config(page_title="ููุญุฉ ูุชุงุจุนุฉ ุงููุจูุนุงุช", layout="wide")
st.title("๐ ููุญุฉ ูุชุงุจุนุฉ ุฃุฏุงุก ููุฏูุจู ุงููุจูุนุงุช")
st.markdown("ุชุญููู ุดุงูู ูุฃุฏุงุก ุงูููุฏูุจูู ูู ุญูุซ ุงููุจูุนุงุช ูุนุฏุฏ ุงูุนููุงุก ูุงููุชุนุงูููู")

# ุงูุจูุงูุงุช
data = {
    "ุงุณู ุงูููุฏูุจ": ["ุฅุจุฑุงููู ุฌูุงู", "ุจุฏุฑ", "ููุฏ", "ุขูุงุก", "ุฌูุงุฏ", "ุดููุงุก ูุฌูู", "ุฃุณูุงุก ุนูุจุฉ", "ุฌูุฑู", "ูุตุทูู", "ุญูุฏู"],
    "ุงููุฏู ุงูุดูุฑู": [80000, 50000, 30000, 30000, 30000, 6000, 6000, 30000, 60000, 60000],
    "ุงูุญุฏ ุงูุฃุฏูู": [56000, 35000, 18000, 18000, 18000, 4200, 4200, 24000, 45000, 45000],
    "ุตุงูู ุงููุจูุนุงุช": [81383.07, 18000, 20574.8, 12171.84, 11600, 4452.95, 4448.09, 25000, 81608.98, 82609.9],
    "ุชุญููู ุงููุฏู ูุจูุนุงุช": [1.02, 0.36, 0.69, 0.41, 0.39, 0.74, 0.74, 0.83, 1.36, 1.38],
    "ุนุฏุฏ ุงูุนููุงุก": [5, 11, 4, 3, 2, 1, 1, 3, 4, 4],
    "ุนุฏุฏ ุงููุชุนุงูููู": [10, 23, 6, 5, 4, 2, 2, 5, 6, 6],
    "ุชุญููู ุงููุฏู ุชุนุงููุงุช": [0.5, 0.48, 0.67, 0.6, 0.5, 0.5, 0.5, 0.6, 0.67, 0.67]
}

df = pd.DataFrame(data)

# ูุคุดุฑุงุช ุงูุฃุฏุงุก ุงูุฑุฆูุณูุฉ
col1, col2, col3 = st.columns(3)
col1.metric("๐ ูุชูุณุท ุชุญููู ุงููุจูุนุงุช", f"{df['ุชุญููู ุงููุฏู ูุจูุนุงุช'].mean():.2f}")
col2.metric("๐ฅ ูุชูุณุท ุชุญููู ุงูุชุนุงููุงุช", f"{df['ุชุญููู ุงููุฏู ุชุนุงููุงุช'].mean():.2f}")
col3.metric("๐ ุฃุนูู ููุฏูุจ ูุจูุนุงุช", df.loc[df['ุชุญููู ุงููุฏู ูุจูุนุงุช'].idxmax(), 'ุงุณู ุงูููุฏูุจ'])

# ุฑุณู ุจูุงูู: ุชุญููู ุงููุจูุนุงุช
st.subheader("๐ ูุนุฏู ุชุญููู ุงููุจูุนุงุช ููู ููุฏูุจ")
fig1 = px.bar(df, x="ุงุณู ุงูููุฏูุจ", y="ุชุญููู ุงููุฏู ูุจูุนุงุช", color="ุชุญููู ุงููุฏู ูุจูุนุงุช",
              text="ุชุญููู ุงููุฏู ูุจูุนุงุช", color_continuous_scale="Viridis")
st.plotly_chart(fig1, use_container_width=True)

# ุฑุณู ุจูุงูู: ุชุญููู ุงูุชุนุงููุงุช
st.subheader("๐ฅ ูุนุฏู ุชุญููู ุงูุชุนุงููุงุช ููู ููุฏูุจ")
fig2 = px.bar(df, x="ุงุณู ุงูููุฏูุจ", y="ุชุญููู ุงููุฏู ุชุนุงููุงุช", color="ุชุญููู ุงููุฏู ุชุนุงููุงุช",
              text="ุชุญููู ุงููุฏู ุชุนุงููุงุช", color_continuous_scale="Blues")
st.plotly_chart(fig2, use_container_width=True)

# ุฑุณู ุจูุงูู: ุตุงูู ุงููุจูุนุงุช
st.subheader("๐ฐ ุตุงูู ุงููุจูุนุงุช ููุงุฑูุฉ ุจุงููุฏู ุงูุดูุฑู")
fig3 = px.scatter(df, x="ุงููุฏู ุงูุดูุฑู", y="ุตุงูู ุงููุจูุนุงุช", color="ุงุณู ุงูููุฏูุจ",
                  size="ุตุงูู ุงููุจูุนุงุช", hover_name="ุงุณู ุงูููุฏูุจ", title="ุตุงูู ุงููุจูุนุงุช ููุงุจู ุงููุฏู")
st.plotly_chart(fig3, use_container_width=True)

# ุฌุฏูู ุงูุจูุงูุงุช
st.subheader("๐ ุงูุฌุฏูู ุงูุชูุตููู ูุฃุฏุงุก ุงูููุฏูุจูู")
st.dataframe(df)

# ููุชุฑุฉ ุญุณุจ ุงุณู ุงูููุฏูุจ
selected = st.selectbox("๐ ุงุฎุชุฑ ุงุณู ุงูููุฏูุจ ูุนุฑุถ ุงูุชูุงุตูู", df["ุงุณู ุงูููุฏูุจ"])
filtered = df[df["ุงุณู ุงูููุฏูุจ"] == selected]
st.write("๐ ุจูุงูุงุช ุงูููุฏูุจ ุงููุฎุชุงุฑ:")
st.dataframe(filtered)

# ุญุฑูุฉ ุฅุถุงููุฉ: ุชูุจูู ุฅุฐุง ูุงู ุงูุฃุฏุงุก ุฃูู ูู ุงูุญุฏ ุงูุฃุฏูู
low_perf = df[df["ุชุญููู ุงููุฏู ูุจูุนุงุช"] < 0.5]
if not low_perf.empty:
    st.warning("โ๏ธ ููุฌุฏ ููุฏูุจูู ุฃุฏุงุกูู ุฃูู ูู 50% ูู ุงููุจูุนุงุช:")
    st.dataframe(low_perf[["ุงุณู ุงูููุฏูุจ", "ุชุญููู ุงููุฏู ูุจูุนุงุช"]])
